extends ../layout

block main
  main.main-page
    h1.visually-hidden –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–∏—á–Ω–æ–≥–æ –±–ª–æ–≥–∞ –¢–∏–ø–æ—Ç–µ–∫–∞
    p –ú–∏–∫—Ä–æ–±–ª–æ–≥ –≤ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ üëè

    if articles.length
      section.main-page__theme-list
        include ../partials/categories-list

      .main-page__section-flex(class=!populars.length && !lastComments.length ? `main-page__section-flex--short` : ``)
        section.main-page__hot.hot
          h2.hot__name(class=!populars.length ? `hot__name--empty` : ``)
            | –°–∞–º–æ–µ –æ–±—Å—É–∂–¥–∞–µ–º–æ–µ
            |
            span.hot__icon.hot__icon--fire
          if populars.length
            ul.hot__list
              each article in populars
                li.hot__list-item
                  a.hot__list-link(href=`/articles/${article.id}`)
                    | #{article.truncatedText}
                    |
                    sup.hot__link-sup #{article.commentsCount}
          else
            p.hot__empty –ó–¥–µ—Å—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç...

        section.main-page__last.last
          h2.last__name
            | –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
            |
            span.last__icon.last__icon--cloud
          if lastComments.length
            ul.last__list
              each comment in lastComments
                li.last__list-item
                  img.last__list-image(src=`/img/${comment.Users.avatar}`, alt=`–ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è`, width=`20`, height=`20`)
                  b.last__list-name #{comment.Users.firstName} #{comment.Users.lastName}
                  a.last__list-link(href=`/articles/${comment.ArticleId}`) #{comment.truncatedText}
          else
            p.last__empty –ó–¥–µ—Å—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç...

      include ../partials/previews-list
    else
      .main-page__empty-wrapper
        p.main-page__empty-text –ó–¥–µ—Å—å –ø–æ–∫–∞ –ø—É—Å—Ç–æ!

block scripts
  script(src=`https://cdn.socket.io/4.1.3/socket.io.js`)
  script(src=`/js/socket.js`)
